<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ·æ´‹ç”Ÿç‰©é…å°åˆ†é¡éŠæˆ²</title>
    <style>
        :root {
            --primary: #0056b3;
            --bg: #f4f7f9;
            --accent: #ff9800;
        }

        body {
            font-family: "Microsoft JhengHei", sans-serif;
            background-color: var(--bg);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            display: flex;
            gap: 30px;
            max-width: 1100px;
            width: 100%;
        }

        /* å·¦å´ï¼šé›¶ä»¶å€ */
        #pool {
            flex: 0 0 220px;
            min-height: 500px;
            background: #fff;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        /* å…±é€šå¡ç‰‡æ¨£å¼ */
        .card {
            background: white;
            border: 2px solid var(--primary);
            border-radius: 8px;
            cursor: grab;
            transition: all 0.2s;
            position: relative;
        }

        /* åœ–ç‰‡å¡ç‰‡ï¼ˆä½œç‚ºå®¹å™¨ï¼‰ */
        .image-card {
            width: 150px;
            height: 150px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .image-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            pointer-events: none;
        }

        /* æ–‡å­—å¡ç‰‡ */
        .text-card {
            padding: 8px;
            text-align: center;
            font-weight: bold;
            background: #e3f2fd;
        }

        /* åˆä½µå¾Œçš„æ¨£å¼ */
        .merged .text-card {
            border: none;
            width: 100%;
            border-top: 1px solid #ddd;
            border-radius: 0;
            background: #fff;
        }

        /* åˆ†é¡ç±ƒ */
        .zone-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .zone {
            background: white;
            border: 3px solid var(--primary);
            border-radius: 15px;
            padding: 15px;
            min-height: 180px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-content: flex-start;
        }

        .zone h3 {
            width: 100%;
            margin: 0 0 10px 0;
            color: var(--primary);
            text-align: center;
            border-bottom: 2px solid #eee;
        }

        .drag-over {
            background: #e1f5fe !important;
            border-style: dashed !important;
        }

        .hint { font-size: 0.9rem; color: #666; margin-bottom: 10px; }
    </style>
</head>
<body>

    <h1>ğŸ‹ æµ·æ´‹ç”Ÿç‰©é…å°åˆ†é¡æŒ‘æˆ°</h1>
    <p class="hint">æ­¥é©Ÿï¼š1. å°‡ã€Œåå­—ã€æ‹–åˆ°ã€Œåœ–ç‰‡ã€ä¸Šåˆä½µ | 2. å°‡ã€Œåˆä½µå¾Œçš„å¡ç‰‡ã€æ‹–å…¥åˆ†é¡ç±ƒ</p>

    <div class="game-container">
        <div id="pool" ondrop="handleDrop(event)" ondragover="handleDragOver(event)">
            <h3>å¾…é…å°æ± </h3>
            
            <div class="card image-card" draggable="true" id="img_1">
                <img src="https://via.placeholder.com/150/0077be/ffffff?text=Dolphin" alt="åœ–">
            </div>

            <div class="card image-card" draggable="true" id="img_2">
                <img src="https://via.placeholder.com/150/2ecc71/ffffff?text=Turtle" alt="åœ–">
            </div>

            <div class="card text-card" draggable="true" id="txt_1">ä¸­è¯ç™½æµ·è±š</div>
            <div class="card text-card" draggable="true" id="txt_2">ç¶ è µé¾œ</div>
        </div>

        <div class="zone-area">
            <div class="zone" id="zone_cetacean" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                <h3>ğŸ³ é¯¨è±šé¡ç±ƒå­</h3>
            </div>
            <div class="zone" id="zone_turtle" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="dragLeave(event)">
                <h3>ğŸ¢ æµ·é¾œé¡ç±ƒå­</h3>
            </div>
        </div>
    </div>

    <button style="margin-top:20px; padding:10px 20px;" onclick="location.reload()">é‡æ–°é–‹å§‹</button>

    <script>
        // ç›£è½æ‰€æœ‰å¡ç‰‡çš„é–‹å§‹æ‹–æ‹½
        document.addEventListener('dragstart', (e) => {
            if (e.target.classList.contains('card')) {
                e.dataTransfer.setData("text", e.target.id);
            }
        });

        function handleDragOver(e) {
            e.preventDefault();
            let target = getValidTarget(e.target);
            if (target) target.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            let target = getValidTarget(e.target);
            if (target) target.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            const draggedId = e.dataTransfer.getData("text");
            const draggedEl = document.getElementById(draggedId);
            let dropTarget = getValidTarget(e.target);

            if (!dropTarget || !draggedEl) return;
            dropTarget.classList.remove('drag-over');

            // æ ¸å¿ƒé‚è¼¯ï¼šå¦‚æœæŠŠæ–‡å­—å¡ç‰‡æ”¾åˆ°åœ–ç‰‡å¡ç‰‡ä¸Š
            if (draggedEl.classList.contains('text-card') && dropTarget.classList.contains('image-card')) {
                dropTarget.appendChild(draggedEl);
                dropTarget.classList.add('merged');
                draggedEl.setAttribute('draggable', 'false'); // åˆä½µå¾Œæ–‡å­—ä¸èƒ½å–®ç¨å†æ‹–
            } else {
                // ä¸€èˆ¬çš„æ”¾ç½®ï¼ˆæ”¾é€²ç±ƒå­æˆ–æ”¾å›æ± å­ï¼‰
                dropTarget.appendChild(draggedEl);
            }
        }

        function getValidTarget(el) {
            while (el) {
                // å…è¨±æ”¾é€²ï¼šç±ƒå­ã€åœ–ç‰‡å¡ç‰‡(ç‚ºäº†åˆä½µ)ã€æˆ–åŸå§‹æ± å­
                if (el.classList.contains('zone') || 
                    el.classList.contains('image-card') || 
                    el.id === 'pool') return el;
                el = el.parentElement;
            }
            return null;
        }
    </script>
</body>
</html>
